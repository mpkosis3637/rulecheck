<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RuleCheck MPK & OSIS</title>
  <style>
    /* ===== RESET ===== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Bookman Old Style', Arial, Helvetica, sans-serif;
      color: #fff;
      background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)),
                  url("https://i.ibb.co/4jFZfvM/aesthetic-bg.jpg") no-repeat center center/cover;
      background-attachment: fixed;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      background: rgba(0,0,128,0.8);
      padding: 20px;
      text-align: center;
      backdrop-filter: blur(6px);
      box-shadow: 0 2px 10px rgba(0,0,0,0.5);
    }
    header h1 { 
      margin: 0; 
      color: #ffd700; 
      text-shadow: 0 0 8px #000;
      animation: fadeInDown 1s ease;
    }

    nav {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      background: rgba(165,42,42,0.8);
      backdrop-filter: blur(6px);
      padding: 10px;
    }
    nav button {
      background: #000080;
      padding: 12px 20px;
      margin: 6px;
      color: #fff;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: 0.3s;
      position: relative;
      overflow: hidden;
    }
    nav button:hover {
      background: #1e90ff;
      box-shadow: 0 0 12px #1e90ff;
    }
    nav button:active::after {
      content: "";
      position: absolute;
      width: 200%;
      height: 200%;
      top: 50%;
      left: 50%;
      background: rgba(92, 1, 1, 0.3);
      transform: translate(-50%, -50%) scale(0);
      border-radius: 50%;
      animation: ripple 0.6s linear;
    }

    main {
      flex: 1;
      padding: 20px;
      animation: fadeIn 1s ease;
    }
    h2 { 
      color: #ffd700; 
      margin-bottom: 10px;
    }

    .card {
      background: rgba(165,42,42,0.7);
      padding: 16px;
      border-radius: 14px;
      margin-bottom: 14px;
      backdrop-filter: blur(6px);
      box-shadow: 0 4px 10px rgba(0,0,0,0.5);
      animation: fadeUp 0.6s ease;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background: rgba(165,42,42,0.7);
      border-radius: 12px;
      overflow: hidden;
      margin-top: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.5);
    }
    th, td {
      border: 1px solid rgba(88, 9, 9, 0.4);
      padding: 10px;
      text-align: left;
    }
    th { 
      background: rgba(0,0,128,0.8); 
    }
    tr:nth-child(even) {
      background: rgba(82, 0, 0, 0.747);
    }
    tr:hover {
      background: rgba(255,215,0,0.2);
    }

    form select, form input, form button {
      width: 100%;
      padding: 10px;
      margin: 5px 0 15px 0;
      border-radius: 6px;
      border: none;
      outline: none;
    }
    form button {
      background: #000080;
      color: #fff;
      cursor: pointer;
      transition: 0.3s;
    }
    form button:hover {
      background: #1e90ff;
      box-shadow: 0 0 8px #1e90ff;
    }

    footer {
      background: rgba(0,0,128,0.8);
      text-align: center;
      padding: 10px;
      margin-top: auto;
      backdrop-filter: blur(6px);
      box-shadow: 0 -2px 10px rgba(0,0,0,0.5);
    }

    section { 
      display: none; 
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.6s ease, transform 0.6s ease;
    }
    section.active { 
      display: block;
      opacity: 1;
      transform: translateY(0);
    }

    /* ===== ANIMATIONS ===== */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes fadeInDown {
      from { opacity: 0; transform: translateY(-20px);}
      to { opacity: 1; transform: translateY(0);}
    }
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(20px);}
      to { opacity: 1; transform: translateY(0);}
    }
    @keyframes ripple {
      to { transform: translate(-50%, -50%) scale(1); opacity: 0; }
    }
  </style>
</head>
<body>
  <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore.js"></script>
<script>
  // Konfigurasi Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyCkbDOZxdvbVJAEs-tGtI3adevrVSceb4M",
    authDomain: "rulecheckmpkosis.firebaseapp.com",
    projectId: "rulecheckmpkosis",
    storageBucket: "rulecheckmpkosis.firebasestorage.app",
    messagingSenderId: "1061731945846",
    appId: "1:1061731945846:web:2435e92777ffab3545fe57"
  };

  // Inisialisasi Firebase
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
</script>

<header>
  <h1>RuleCheck MPK & OSIS</h1>
</header>
<nav>
  <button onclick="showPage('home')">HOME</button>
  <button onclick="showPage('mpk')">MPK</button>
  <button onclick="showPage('osis')">OSIS</button>
  <button onclick="showPage('pelanggaran')">PELANGGARAN</button>
  <button onclick="showPage('laporan')">LAPORAN</button>
</nav>

<main>
  <!-- HOME -->
  <section id="home" class="active">
    <h2>Selamat Datang</h2>
    <div class="card">
      <p>
        RuleCheck adalah website internal untuk mencatat, memantau, dan mengakumulasi poin pelanggaran pengurus MPK maupun OSIS secara real-time. 
        Sistem ini memudahkan konfirmasi kehadiran dan pencatatan pelanggaran dengan memilih jenis pelanggaran yang tersedia. 
        Data tersimpan berdasarkan bulan dan dapat dievaluasi berkala.
      </p>
    </div>
  </section>

  <!-- MPK -->
  <section id="mpk">
    <h2>Majelis Permusyawaratan Kelas (MPK) SMAN 3 Subang</h2>
    <div class="card">
      <h3>Komisi A</h3>
      <p>1 Ketua dan 2 Anggota. Bertugas merevisi program kerja OSIS, menampung aspirasi, menjadi humas, serta menyiapkan kebutuhan rapat.</p>
    </div>
    <div class="card">
      <h3>Komisi B</h3>
      <p>1 Ketua dan 1 Anggota. Bertugas merancang AD/ART, membentuk tim disiplin, serta ketetapan MPK lainnya.</p>
    </div>
    <div class="card">
      <h3>Komisi C</h3>
      <p>1 Ketua dan 1 Anggota. Bertugas mengawasi dan mengevaluasi kegiatan OSIS serta menerima pertanggungjawaban OSIS.</p>
    </div>
    <h2>Pengurus MPK</h2>
    <ul>
      <li>Zita Larisa Yuviansyah</li>
      <li>Reysha Fitri Anggraini</li>
      <li>Satrio Akbar Pamungkas</li>
      <li>Kartika Cahya Ningrat</li>
      <li>Syfa Aprida</li>
      <li>Salsabila Amilia Gunawan</li>
    </ul>
  </section>

  <!-- OSIS -->
  <section id="osis">
    <h2>Organisasi Siswa Intra Sekolah (OSIS) SMAN 3 Subang</h2>
    <div class="card"><h3>Sekretariat Bidang 1</h3><p>Pembinaan Keimanan dan Ketakwaan.</p></div>
    <div class="card"><h3>Sekretariat Bidang 2</h3><p>Pembinaan Budi Pekerti Luhur dan Akhlak Mulia.</p></div>
    <div class="card"><h3>Sekretariat Bidang 3</h3><p>Pembinaan Kepribadian Unggul, Wawasan Kebangsaan dan Bela Negara.</p></div>
    <div class="card"><h3>Sekretariat Bidang 4</h3><p>Pembinaan Akademik, Seni, dan Olahraga.</p></div>
    <div class="card"><h3>Sekretariat Bidang 5</h3><p>Pembinaan Demokrasi, HAM, Lingkungan Hidup dan Kepekaan Sosial.</p></div>
    <div class="card"><h3>Sekretariat Bidang 6</h3><p>Pembinaan Kreativitas, Keterampilan dan Kewirausahaan.</p></div>
    <div class="card"><h3>Sekretariat Bidang 7</h3><p>Pembinaan Gizi dan Kesehatan Lingkungan.</p></div>
    <div class="card"><h3>Sekretariat Bidang 8</h3><p>Pembinaan Sastra dan Budaya.</p></div>
    <div class="card"><h3>Sekretariat Bidang 9</h3><p>Pembinaan Teknologi Informasi dan Komunikasi.</p></div>
    <div class="card"><h3>Sekretariat Bidang 10</h3><p>Pembinaan Komunikasi Berbahasa Asing.</p></div>

    <h2>Pengurus OSIS</h2>
    <ul>
      <li>Dila Nindia Putri</li>
      <li>Aleeza Najla Amani</li>
      <li>Ataya Rizq Azmi</li>
      <li>Shofi Aulia Rahayu</li>
      <li>Jejep Sutrisno</li>
      <li>Ayumi Rizky Nabila</li>
      <li>Rehan Maulana</li>
      <li>Noah Nathanael Yahya</li>
    </ul>
  </section>

  <!-- PELANGGARAN -->
  <section id="pelanggaran">
    <h2>Input Pelanggaran</h2>
    <form id="ruleForm">
      <label>Nama Pengurus</label>
      <select id="nama" required>
        <option value="">-- Pilih Pengurus --</option>
        <optgroup label="MPK">
          <option>Zita Larisa Yuviansyah</option>
          <option>Reysha Fitri Anggraini</option>
          <option>Satrio Akbar Pamungkas</option>
          <option>Kartika Cahya Ningrat</option>
          <option>Syfa Aprida</option>
          <option>Salsabila Amilia Gunawan</option>
        </optgroup>
        <optgroup label="OSIS">
          <option>Dila Nindia Putri</option>
          <option>Aleeza Najla Amani</option>
          <option>Ataya Rizq Azmi</option>
          <option>Shofi Aulia Rahayu</option>
          <option>Jejep Sutrisno</option>
          <option>Ayumi Rizky Nabila</option>
          <option>Rehan Maulana</option>
          <option>Noah Nathanael Yahya</option>
        </optgroup>
      </select>

      <label>Jenis Pelanggaran</label>
      <select id="pelanggaranSelect" required>
        <option value="">-- Pilih Pelanggaran --</option>
        <option value="Terlambat datang ke sekolah" data-poin="5">Terlambat datang ke sekolah (5)</option>
        <option value="Terlambat jaga gerbang" data-poin="7">Terlambat jaga gerbang (7)</option>
        <option value="Tidak melaksanakan jaga gerbang" data-poin="10">Tidak melaksanakan jaga gerbang (10)</option>
        <option value="Tidak menggunakan pin" data-poin="5">Tidak menggunakan pin (5)</option>
        <option value="Tidak menggunakan kaos kaki sesuai aturan" data-poin="5">Tidak menggunakan kaos kaki sesuai aturan (5)</option>
        <option value="Tidak memakai ikat pinggang" data-poin="5">Tidak memakai ikat pinggang (5)</option>
        <option value="Tidak memakai atribut lainnya sesuai aturan" data-poin="5">Tidak memakai atribut lainnya sesuai aturan (5)</option>
      </select>

      <label>Tanggal Pelanggaran</label>
      <input type="date" id="tanggal" required>
      <button type="submit">Input</button>
    </form>

    <h2>Riwayat Pelanggaran</h2>
    <div id="riwayat"></div>
  </section>

  <!-- LAPORAN -->
  <section id="laporan">
    <h2>Laporan Per Orang (Per Bulan)</h2>
    <div id="laporanContainer"></div>
  </section>
</main>

<footer>
  &copy; 2025 RuleCheck MPK & OSIS
</footer>

<script>
  function showPage(id) {
    document.querySelectorAll("main section").forEach(sec => sec.classList.remove("active"));
    document.getElementById(id).classList.add("active");
  }

  const riwayatDiv = document.getElementById("riwayat");
  const laporanDiv = document.getElementById("laporanContainer");
  const start = new Date("2025-09-01");
  const end = new Date("2026-06-30");
  let d = new Date(start);

  while (d <= end) {
    const monthName = d.toLocaleDateString("id-ID", { month: "long", year: "numeric" });
    const safeId = monthName.replace(/\s/g, "-");
    const div = document.createElement("div");
    div.id = "bulan-" + safeId;
    div.innerHTML = `<h3>${monthName}</h3>
      <table>
        <thead>
          <tr>
            <th>Nama</th>
            <th>Pelanggaran</th>
            <th>Poin</th>
            <th>Hari, Tanggal</th>
            <th>Aksi</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>`;
    riwayatDiv.appendChild(div);

    const laporanDivBulan = document.createElement("div");
    laporanDivBulan.id = "laporan-" + safeId;
    laporanDivBulan.innerHTML = `<h3>${monthName}</h3>
      <table>
        <thead>
          <tr>
            <th>Nama</th>
            <th>Total Poin</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>`;
    laporanDiv.appendChild(laporanDivBulan);

    d.setMonth(d.getMonth() + 1);
  }

  document.getElementById("ruleForm").addEventListener("submit", e => {
    e.preventDefault();
    const nama = document.getElementById("nama").value;
    const pel = document.getElementById("pelanggaranSelect");
    const jenis = pel.value;
    const poin = parseInt(pel.selectedOptions[0].getAttribute("data-poin"));
    const tglInput = new Date(document.getElementById("tanggal").value);

    if (isNaN(tglInput)) { alert("Tanggal tidak valid"); return; }

    const hariTanggal = tglInput.toLocaleDateString("id-ID", {
      weekday: "long", year: "numeric", month: "long", day: "numeric"
    });
    const bulanKey = tglInput.toLocaleDateString("id-ID", { month: "long", year: "numeric" }).replace(/\s/g, "-");
    const tbody = document.querySelector(`#bulan-${bulanKey} tbody`);

    if (tbody) {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${nama}</td>
        <td>${jenis}</td>
        <td>${poin}</td>
        <td>${hariTanggal}</td>
        <td><button onclick="hapusBaris(this, '${bulanKey}', ${poin}, '${nama}')">‚ùå Hapus</button></td>
      `;
      tbody.appendChild(row);
      updateLaporan(bulanKey, nama, poin);
      saveData();
    }
    e.target.reset();
  });

  function hapusBaris(btn, bulanKey, poin, nama) {
    if (confirm("Yakin mau hapus data ini?")) {
      btn.closest("tr").remove();
      updateLaporan(bulanKey, nama, -poin);
      saveData();
    }
  }

  function updateLaporan(bulanKey, nama, poin) {
    const laporanBody = document.querySelector(`#laporan-${bulanKey} tbody`);
    let row = Array.from(laporanBody.rows).find(r => r.cells[0].innerText === nama);
    if (!row && poin > 0) {
      row = laporanBody.insertRow();
      row.insertCell(0).innerText = nama;
      row.insertCell(1).innerText = poin;
    } else if (row) {
      const total = parseInt(row.cells[1].innerText) + poin;
      if (total <= 0) row.remove();
      else row.cells[1].innerText = total;
    }
  }

  function saveData() {
    localStorage.setItem("riwayat", riwayatDiv.innerHTML);
    localStorage.setItem("laporan", laporanDiv.innerHTML);
  }
  function loadData() {
    if (localStorage.getItem("riwayat")) riwayatDiv.innerHTML = localStorage.getItem("riwayat");
    if (localStorage.getItem("laporan")) laporanDiv.innerHTML = localStorage.getItem("laporan");
  }
  loadData();
</script>
</body>
</html>
